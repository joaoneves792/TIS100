@0
MOV DOWN, ACC
MOV ACC, DOWN
MOV ACC, DOWN

@1
S:MOV UP, ACC
SWP
L:SWP
MOV ACC, DOWN
MOV ACC, DOWN
SWP
MOV DOWN, ACC
JEZ L
JLZ S
SAV
JMP L

@2
MOV DOWN, ACC
MOV ACC, DOWN
MOV ACC, DOWN

@3
MOV RIGHT, ACC
MOV ACC, UP
L:SWP
ADD UP
SWP
SUB 1
JEZ E
MOV UP, UP
JMP L
E:MOV UP, NIL
SWP
MOV ACC, RIGHT

@4
MOV 2, ACC
L:SAV
MOV ACC, LEFT
MOV LEFT, ACC
SUB UP
JGZ E
MOV UP, RIGHT
SWP
MOV ACC, RIGHT
MOV RIGHT, DOWN
MOV ACC, DOWN
MOV RIGHT, DOWN
MOV DOWN, UP
ADD DOWN
E:JMP L

@5
S:MOV LEFT, ACC
MOV LEFT, UP
L:SUB UP
JGZ C
JEZ E
ADD UP
MOV 0, RIGHT
JMP X
C:MOV UP, UP
MOV 1, RIGHT
JMP L
E:MOV UP, RIGHT
MOV 0, RIGHT
X:MOV ACC, LEFT
MOV RIGHT, LEFT

@6
L:MOV LEFT, ACC
JEZ E
SWP
ADD 1
SWP
JMP L
E:SWP
MOV ACC, LEFT
MOV 0, ACC
SAV

@7


@8
S:MOV UP, ACC
JNZ E
MOV UP, DOWN
MOV UP, UP
MOV 0, UP
JMP S
E:MOV UP, NIL
MOV UP, NIL
MOV 0, UP
MOV 1, UP
JMP S

@9


@10

