@0
S1:MOV 0, RIGHT
S:MOV UP, ACC
MOV ACC, RIGHT
SWP
ADD 1
SWP
JNZ S
SWP
MOV ACC, RIGHT
MOV NIL, DOWN
L1:MOV DOWN, ACC
JLZ S1
MOV ACC, RIGHT
JMP L1

@1
MOV DOWN, ACC
SWP
MOV DOWN, ACC
SWP
MOV ACC, DOWN
SWP
MOV ACC, DOWN
SWP
MOV ACC, DOWN
SWP
MOV ACC, DOWN

@2
MOV 2, RIGHT
MOV 3, RIGHT

@3
MOV UP, NIL
L:MOV LEFT, RIGHT
MOV RIGHT, NIL
E:MOV DOWN, ACC
JLZ F
MOV ACC, UP
L2:MOV DOWN, ACC
MOV ACC, UP
JGZ L2
MOV DOWN, UP
JMP L
F:MOV ACC, UP

@4
S:MOV LEFT, ACC
L1:MOV UP, DOWN
SUB 1
JGZ L1
L:MOV UP, ACC
JEZ E
MOV ACC, RIGHT
MOV UP, RIGHT
MOV RIGHT, DOWN
MOV RIGHT, ACC
MOV ACC, DOWN
JEZ E2
JMP L
E:MOV NIL, DOWN
E2:MOV NIL, LEFT

@5
S:MOV LEFT, UP
MOV LEFT, ACC
MOV ACC, UP
JEZ E
MOV UP, ACC
SUB UP
JLZ ON
NO:MOV UP, ACC
MOV UP, LEFT
MOV ACC, LEFT
JMP S
E:MOV UP, NIL
MOV UP, NIL
ON:MOV UP, LEFT
MOV UP, LEFT

@6


@7
S:MOV UP, ACC
SUB 1
JEZ E
MOV ACC, LEFT
MOV UP, LEFT
L:MOV UP, ACC
MOV ACC, LEFT
JGZ L
JMP S
E:MOV UP, NIL
L2:MOV UP, ACC
MOV ACC, DOWN
JGZ L2
MOV -999, LEFT

@8

